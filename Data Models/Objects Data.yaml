messages:
  - &drop You put the <object> down on the ground.
  - &attack_with
  - &untakeable You can't take the <object>.
  - &undroppable You can't drop the <object> here.
  - &unthrowable You can't throw the <object>.
  - &unattackable You can't attack the <object>.
  - &ungotoable You can't go to an object, you can only go to a location.

OBJECTS:
  backpack:
    type: CONTAINER
    references: [backpack, bag, sack, pack, knapsack]
    description: A brown linen durable backpack capable of holding up to 55 lbs.
    short_desc: a brown linen backpack
    active_location: '10'
    inventory: []
    weight: 3
    damage: 5

  knife:
    type: SIMPLE
    references: [knife, blade, dagger]
    description: An 7-inch silver blade sitting atop a matte-black handle, engraved with the head of a sheep.
    short_desc: a silver knife
    active_location: 


  egg:
    type: SIMPLE
    references: [egg, silver egg]
    description: A large silver egg, weighing about 5 lbs.
    short_desc: a large silver egg
    active_location: 6a
    damage: 0
    weight: 4

    reactions:
      commands:
        throw:
          general: You throw the egg yay. IT breaks.
          actions: [[remove_from_game, egg]]

  lantern:
    type: COMPLEX
    references: [lantern, light, brass]
    description: A brass lantern with clouded glass doors and a curved black handle.
    short_desc: a brass lantern
    weight: 6
    damage: 10
    active_location: 6a
    
    states:
      lit: False
      light_guard: True
    # state_change_exceptions:

    
    # messages:
    reactions:
      state_changes:
        lit:
          general:
            True: The light turns on, but it doesn't help - it's already light here.
            False: The light turns off, but so what? It's already light here.
          exceptions: 
            - [if: [[player, active_location, 6a]],
              reaction: {True: 'The light turns on, and everything becomes more clear.
                                You see a stone staircase rise up in front of you.',
                        False: 'The light flickers off, and it becomes harder to see.'}]

            - [if: [[troll, guarding, True], [player, active_location, 4a]],
              reaction: {True: The troll's power stops the light from turning on.}]

      commands:
        take: You pick up the lantern and brush off the dust covering the stained 
            glass sides. It looks like it has been here for a while.
        throw:
          general: You throw the lantern and it falls with a clatter on the ground a few feet away.
          exceptions:
            - [if: [[troll, guarding, True], [player, active_location, 4a]],
              reaction: "You throw the lantern and the troll runs away, scared."]  
        #- attack: *unattackable

ACTORS:
  # actors don't have a weight, it doesn't really matter how heavy they are
  # because you're not throwing them at something as you don't have control over them.
  troll:
    type: Violent
    references: [troll, ugly]
    description: a large ugly troll
    active_location: 4a
    damage: 17
    health: 100
    attack: True
    can_talk: False

    states:
      guarding: True
      health:

    # messages:
    reactions:
      state_changes:
        guarding:
          False: It ambles away, shoulders drooping.
        health:
          # see Player.yaml for explanation as to the unusual format of this state_change dictionary.
          general: The troll receives damage. Well done. Soon enough and he might be too weak to, you know....
          exceptions:
          - [if: [[player, active_weapon, knife]],
            reaction: You lunge at the troll with the sharp blade of your knife.]
          - [if: [[troll, damage_received, 'range(90,100)']],
            reaction: 'The troll is definitely not happy, he is not used to being challenged.']
          - [if: [[troll, health, 'range(81,90)']],
            reaction: 'The troll is definitely not used to being challenged like this. 
                      He is not happy that he lost the life that he did.']
          - [if: [[troll, health, 'range(69,81)']],
            reaction: 'Do you ']
          actions: [troll, change_state, guarding]

      attack:
        damage_received: [
          {if: ['range(1,7)'],
          message: ["The troll staggers, seeming like he is about to lose his footing, but he
                    grounds himself, ready to continue to take you on."]},
          {if: ['range(7,15)'],
          message: [The troll gives you a medium attack.]},
          {if: ['range(15,25)'],
          message: [The troll pummels you to the ground and smacks your head in.,
                    The troll pulls you like the bear did in the Revenant™]}
                  ]

        response:
          actions: [[troll, attack, 'range(1,25)']]
          message: [
            {if: ['range(1,7)'],
            message: [The troll lunges at you and scratches your face, 
                      The troll swipes at you and you fall to the ground.]},
            {if: ['range(7,15)'],
            message: ["The troll takes his stick and rams it into your stomach. You fall over, gasping for breath.
                      You know, it's really not a good idea to fight this thing. Why fight when you can go another,
                      more peaceful, route?"]},
            {if: ['range(15,25)'],
            message: [The troll pummels you to the ground and smacks your head in.,
                      The troll pulls you like the bear did in the Revenant™]}
                    ]
      
      receive:
        egg:
          reaction:
            general: The troll gently reaches out and takes the egg from your hand. 
              It examines the egg, turning it over in its large hands. Looking satisfied, the troll
              steps aside, allowing you to cross.
            exceptions:
              - [if: [[troll, health, 'range(30,100)']],
                reaction: "The troll, breathing heavily from fighting, relaxes it's posture and slowly reaches out to take the egg.
                    It examines the egg, turning it over in its large hands. Looking satisfied, the troll
                    steps aside, allowing you to cross."]
          actions: [[troll, change_state, guarding], [4a, remove_object, troll]]