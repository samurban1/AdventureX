messages:
  - &drop You put the <object> down on the ground.
  - &attack_with
  - &untakeable You can't take the <object>.
  - &undroppable You can't drop the <object> here.
  - &unthrowable You can't throw the <object>.
  - &unattackable You can't attack the <object>.
  - &ungotoable You can't go to an object, you can only go to a location.

OBJECTS:
  backpack:
    type: CONTAINER
    references: [backpack, bag, sack, pack, knapsack]
    description: A brown linen durable backpack capable of holding up to 55 lbs.
    short_desc: a brown linen backpack
    active_location: '10'
    inventory: []
    weight: 3
    damage: 5

    reactions: {}

  knife:
    type: SIMPLE
    references: [knife, blade, dagger]
    description: An 7-inch silver blade sitting atop a matte-black handle, engraved with the head of a sheep.
    short_desc: a silver knife
    active_location: 4b
    damage: 22
    weight: 

    reactions: {}

  egg:
    type: SIMPLE
    references: [egg, silver egg]
    description: A large silver egg, weighing about 5 lbs.
    short_desc: a large silver egg
    active_location: 6a
    damage: 0
    weight: 4

    reactions:
      commands:
        throw:
          reaction: You throw the egg yay. IT breaks.
          actions: [[remove_from_game, egg]]

  lantern:
    type: COMPLEX
    references: [lantern, light, brass]
    description: A brass lantern with clouded glass doors and a curved black handle.
    short_desc: a brass lantern
    weight: 6
    damage: 13
    active_location: 6a
    
    states:
      lit: False
      light_guard: True
    # state_change_exceptions:

    # messages:
    reactions:
      state_changes:
        lit:
          general:
            True: The light turns on, but it doesn't help - it's already light here.
            False: The light turns off, but so what? It's already light here.
          exceptions: 
            - {if: [[player, active_location, 6a]],
              reaction: {True: 'The light turns on, and everything becomes more clear.
                                You see a stone staircase rise up in front of you.',
                        False: 'The light flickers off, and it becomes harder to see.'}}

            - {if: [[troll, guarding, True], [player, active_location, 4a]],
              reaction: {True: The troll's power stops the light from turning on.}}

      commands:
        take: You pick up the lantern and brush off the dust covering the stained 
            glass sides. It looks like it has been here for a while.
        throw:
          general: You throw the lantern and it falls with a clatter on the ground a few feet away.
          exceptions:
            - {if: [[troll, guarding, True], [player, active_location, 4a]],  
            # if throw at troll is not specifically called, and player just throws in in the vicinity of the troll.
            # if throw at troll is called, then it won't map to the throw reaction, it will map to the attack reaction
              reaction: "You throw the lantern and the troll runs away, scared."}  
        #- attack: *unattackable

ACTORS:
  # actors don't have a weight, it doesn't really matter how heavy they are
  # because you're not throwing them at something as you don't have control over them.
  troll:

    # attributes that all actors have
    type: Violent
    references: [troll, ugly]
    description: a large ugly troll
    short_desc: a large ugly troll
    active_location: 4a
    damage: 17
    health: 100
    attack: True
    can_talk: False

    # states are attributes specific to this actor
    states:
      guarding: True

    # messages:
    reactions:
      state_changes:
        guarding:
          general:
            reaction:
              False: It ambles away, shoulders drooping.
            # action: 
        health:
          general: The troll's health decreases.
          exceptions:
          - {if: [[troll, health, 'range(20,35)']],
            reaction: The troll is too weak to guard the bridge.,
            actions: [[troll, change_state, guarding, False]]}

      attack:
        damage_received:
          - {if: [0],
            messages: [That had absolutely zero effect on the troll. Try again.]}
          - {if: ['range(1,7)'],  # if player's attack damage is in range()
            messages: ["The troll staggers, seeming like he is about to lose his footing, but he
                    grounds himself, ready to continue to take you on."]}  # troll gets attacked message
          - {if: ['range(7,15)'],
            messages: ['The troll is definitely not happy, he is not used to being challenged like this.']}
          - {if: ['range(15,25)'],
            messages: [The troll falls to the ground but gets back up again. He is not used to being challenged like this.]}

        response:
          actions: [[troll, attack, 'range(1,25)']]
          message:
            - {if: ['range(1,7)'],  # if troll's attack on player is in range()
              messages: [The troll lunges at you and scratches your face,  # player gets attacked message
                      The troll swipes at you and you fall to the ground.]}
            - {if: ['range(7,15)'],
              messages: ["The troll takes his stick and rams it into your stomach. You fall over, gasping for breath.
                      You know, it's really not a good idea to fight this thing. Why fight when you can go another,
                      more peaceful, route?"]}
            - {if: ['range(15,25)'],
              messages: [The troll pummels you to the ground and smacks your head in.,
                      The troll grabs you like the bear did in the Revenantâ„¢ and throws you a few feet away.]}

      receive:
        egg:
          general:
            reaction: The troll gently reaches out and takes the egg from your hand. 
              It examines the egg, turning it over in its large hands. Looking satisfied, the troll
              steps aside, allowing you to cross.
            actions: [[troll, change_state, guarding, False], [4a, remove_object, troll]]
          exceptions:
            - {if: [[troll, health, 'range(30,100)']],  # if it has lost any amount of health (range will go up to 99)
              reaction: "The troll, breathing heavily from fighting, relaxes it's posture and slowly reaches out to take the egg.
                  It examines the egg, turning it over in its large hands. Looking satisfied, the troll
                  steps aside, allowing you to cross.",
              actions: [[troll, change_state, guarding, False], [4a, remove_object, troll]]}
